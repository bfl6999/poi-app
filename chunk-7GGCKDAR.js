import{a as f1}from"./chunk-6DRDY65T.js";import{B as u1,C as M1,E as z1,I as k1,c as Z,d as J,e as K,f as o1,g as a1,h as s1,i as t1,j as i1,k as n1,m as l1,n as c1,o as e1,p as r1,q as v1,r as g1,s as w1,t as h1,u as p1,x as d1,y as x1,z as m1}from"./chunk-C4635AQ6.js";import"./chunk-RXWWUHP3.js";import"./chunk-QUJFQN2Y.js";import"./chunk-S3FFCQW7.js";import"./chunk-DOTHXVNP.js";import"./chunk-AWJPMP66.js";import"./chunk-DZ63SHBZ.js";import"./chunk-N3ULCH4Z.js";import"./chunk-A6U5T4IK.js";import"./chunk-BYMGTA2M.js";import"./chunk-FFMQGMXV.js";import"./chunk-WVCYVA7Q.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-BQTEGPC7.js";import"./chunk-CKP3SGE2.js";import"./chunk-M7AYFT6S.js";import"./chunk-R265GKSD.js";import{$ as y,C as g,Da as E,G as r,H as t,I as s,J as v,K as A,L as S,N as m,O as u,P as h,W as k,X as i,Y as f,Z as B,aa as j,ab as U,ba as O,bb as R,ea as b,eb as N,ec as B1,fb as W,ga as q,gb as G,ha as L,hb as X,j as p,kb as Q,la as _,lb as Y,lc as L1,m as d,ma as F,mb as $,n as x,nc as H1,oa as D,pa as I,v as c,y as C,ya as P,za as T}from"./chunk-CP2QVCAP.js";import"./chunk-EVXCY5NW.js";import"./chunk-JXNEG2Q2.js";import"./chunk-FUY72XGA.js";import"./chunk-EQDBGDMV.js";import"./chunk-WESY2VG5.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-D7YYRZS5.js";var H,j1=function(){if(typeof window>"u")return new Map;if(!H){var o=window;o.Ionicons=o.Ionicons||{},H=o.Ionicons.map=o.Ionicons.map||new Map}return H},V=function(o){Object.keys(o).forEach(function(n){V1(n,o[n]);var a=n.replace(/([a-z0-9]|(?=[A-Z]))([A-Z0-9])/g,"$1-$2").toLowerCase();n!==a&&V1(a,o[n])})},V1=function(o,n){var a=j1(),e=a.get(o);e===void 0?a.set(o,n):e!==n&&console.warn('[Ionicons Warning]: Multiple icons were mapped to name "'.concat(o,'". Ensure that multiple icons are not mapped to the same icon name.'))};var C1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M256 112v288M400 256H112' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var A1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M272 464a16 16 0 01-16-16.42V264.13a8 8 0 00-8-8H64.41a16.31 16.31 0 01-15.49-10.65 16 16 0 018.41-19.87l384-176.15a16 16 0 0121.22 21.19l-176 384A16 16 0 01272 464z'/></svg>";var S1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M332.64 64.58C313.18 43.57 286 32 256 32c-30.16 0-57.43 11.5-76.8 32.38-19.58 21.11-29.12 49.8-26.88 80.78C156.76 206.28 203.27 256 256 256s99.16-49.71 103.67-110.82c2.27-30.7-7.33-59.33-27.03-80.6zM432 480H80a31 31 0 01-24.2-11.13c-6.5-7.77-9.12-18.38-7.18-29.11C57.06 392.94 83.4 353.61 124.8 326c36.78-24.51 83.37-38 131.2-38s94.42 13.5 131.2 38c41.4 27.6 67.74 66.93 76.18 113.75 1.94 10.73-.68 21.34-7.18 29.11A31 31 0 01432 480z'/></svg>";var y1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z'/></svg>";function O1(o,n){if(o&1){let a=m();A(0),t(1,"ion-button",14),u("click",function(){d(a);let l=h();return x(l.logout())}),i(2,"Cerrar sesi\xF3n"),s(),t(3,"ion-button",15),i(4),s(),S()}if(o&2){let a=h();c(4),B(" ",a.user.displayName||a.user.email," ")}}function b1(o,n){o&1&&(t(0,"ion-button",16),i(1,"Iniciar sesi\xF3n"),s(),t(2,"ion-button",17),i(3,"Registrarse"),s())}function q1(o,n){o&1&&(t(0,"ion-item")(1,"ion-label",18),i(2,"Nombre"),s(),v(3,"ion-input",19),s())}function _1(o,n){o&1&&(t(0,"ion-item")(1,"ion-label",18),i(2,"Lugar"),s(),v(3,"ion-input",20),s())}function F1(o,n){o&1&&(t(0,"ion-item")(1,"ion-label"),i(2,"Fecha"),s(),v(3,"ion-datetime",21),s())}function D1(o,n){if(o&1&&(t(0,"p"),i(1),b(2,"date"),s()),o&2){let a=h().$implicit;c(),B("Fecha: ",q(2,1,a.dateAdded,"shortDate"))}}function I1(o,n){if(o&1){let a=m();t(0,"ion-card",23),u("click",function(){let l=d(a).$implicit,w=h(2);return x(w.goToDetail(l._id))}),t(1,"ion-card-header")(2,"ion-card-title"),i(3),s(),t(4,"ion-card-subtitle"),i(5),s()(),t(6,"ion-card-content")(7,"ion-text",24),g(8,D1,3,4,"p",11),s()()()}if(o&2){let a=n.$implicit;c(3),f(a.name),c(2),f(a.location),c(3),r("ngIf",a.dateAdded)}}function P1(o,n){if(o&1&&(t(0,"ion-list"),g(1,I1,9,3,"ion-card",22),s()),o&2){let a=h();c(),r("ngForOf",a.pois)}}function T1(o,n){o&1&&(t(0,"ion-text",25)(1,"p"),i(2,"No hay POIs para mostrar."),s()())}function E1(o,n){o&1&&(t(0,"ion-footer")(1,"ion-toolbar")(2,"ion-buttons",26)(3,"ion-button",27),v(4,"ion-icon",28),i(5," A\xF1adir POI "),s(),t(6,"ion-button",29),v(7,"ion-icon",13),i(8," Buscar "),s(),t(9,"ion-button",30),v(10,"ion-icon",31),i(11," Ruta "),s(),t(12,"ion-button",32),v(13,"ion-icon",33),i(14," Mis POIs "),s()()()())}var c2=(()=>{class o{constructor(){this.poiService=p(f1),this.auth=p(B1),this.fb=p(Q),this.router=p(P),this.pois=[],this.user=null,this.searchType="",this.searchForm=this.fb.group({name:[""],location:[""],date:[""]}),V({add:C1,search:y1,navigate:A1,person:S1})}ngOnInit(){L1(this.auth,a=>{this.user=a}),this.loadAllPois()}loadAllPois(){this.poiService.getAllPOIs().subscribe({next:a=>this.pois=a,error:a=>console.error("Error cargando POIs",a)})}onSearch(){let a=this.searchForm.value;this.poiService.getAllPOIs(a).subscribe({next:e=>this.pois=e,error:e=>console.error("Error en b\xFAsqueda",e)})}goToDetail(a){a&&this.router.navigate(["/poi",a])}goToAddPoi(){this.router.navigate(["/add-poi"])}goToSearchPoi(){this.router.navigate(["/search-poi"])}isAuthenticated(){return this.user!==null}logout(){H1(this.auth).then(()=>{this.router.navigate(["/home"])})}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=C({type:o,selectors:[["app-home"]],decls:35,vars:10,consts:[["notLoggedIn",""],["noResults",""],["color","primary"],["slot","end"],[4,"ngIf","ngIfElse"],[1,"ion-padding"],["data-cy","search-filter","placeholder","Selecciona filtro",3,"ngModelChange","ngModel"],["value","name"],["value","location"],["value","date"],[1,"ion-margin-top",3,"ngSubmit","formGroup"],[4,"ngIf"],["expand","block","type","submit","color","primary",1,"ion-margin-top"],["name","search","slot","start"],["fill","clear",3,"click"],["fill","clear","disabled",""],["fill","clear","routerLink","/login"],["fill","clear","routerLink","/register"],["position","floating"],["formControlName","name","type","text","data-cy","input-name"],["formControlName","location","type","text"],["formControlName","date","presentation","date"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["color","medium"],["color","medium",1,"ion-text-center"],["expand","block",1,"action-toolbar"],["routerLink","/add-poi","fill","clear"],["name","add","slot","start"],["routerLink","/search-poi","fill","clear"],["routerLink","/generate-route","fill","clear"],["name","navigate","slot","start"],["routerLink","/user-pois","fill","clear"],["name","person","slot","start"]],template:function(e,l){if(e&1){let w=m();t(0,"ion-header")(1,"ion-toolbar",2)(2,"ion-title"),i(3,"POIs"),s(),t(4,"ion-buttons",3),g(5,O1,5,1,"ng-container",4)(6,b1,4,0,"ng-template",null,0,L),s()()(),t(8,"ion-content",5)(9,"ion-card")(10,"ion-card-header")(11,"ion-card-title"),i(12,"Buscar POIs"),s()(),t(13,"ion-card-content")(14,"ion-item")(15,"ion-label"),i(16,"Buscar por"),s(),t(17,"ion-select",6),O("ngModelChange",function(z){return d(w),j(l.searchType,z)||(l.searchType=z),x(z)}),t(18,"ion-select-option",7),i(19,"Nombre"),s(),t(20,"ion-select-option",8),i(21,"Lugar"),s(),t(22,"ion-select-option",9),i(23,"Fecha"),s()()(),t(24,"form",10),u("ngSubmit",function(){return d(w),x(l.onSearch())}),g(25,q1,4,0,"ion-item",11)(26,_1,4,0,"ion-item",11)(27,F1,4,0,"ion-item",11),t(28,"ion-button",12),v(29,"ion-icon",13),i(30," Buscar "),s()()()(),g(31,P1,2,1,"ion-list",4)(32,T1,3,0,"ng-template",null,1,L),s(),g(34,E1,15,0,"ion-footer",11)}if(e&2){let w=k(7),M=k(33);c(5),r("ngIf",l.user)("ngIfElse",w),c(12),y("ngModel",l.searchType),c(7),r("formGroup",l.searchForm),c(),r("ngIf",l.searchType==="name"),c(),r("ngIf",l.searchType==="location"),c(),r("ngIf",l.searchType==="date"),c(4),r("ngIf",l.pois.length>0)("ngIfElse",M),c(3),r("ngIf",l.isAuthenticated())}},dependencies:[I,_,F,D,k1,K,o1,a1,s1,t1,i1,n1,l1,c1,e1,r1,v1,g1,w1,h1,p1,d1,x1,m1,u1,M1,Z,J,z1,E,T,$,W,U,R,G,X,Y,N],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.action-toolbar[_ngcontent-%COMP%]{justify-content:space-around}.action-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;font-size:.8rem}.action-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.6rem;margin-bottom:2px}"]})}}return o})();export{c2 as HomePage};
