import{a as Q}from"./chunk-4LASXX4D.js";import{B,C as H,G as J,H as K,I as O,d as V,e as L,m as k,p as G,q,r as D,s as A,t as j,z}from"./chunk-C4635AQ6.js";import"./chunk-RXWWUHP3.js";import"./chunk-QUJFQN2Y.js";import"./chunk-S3FFCQW7.js";import"./chunk-DOTHXVNP.js";import"./chunk-AWJPMP66.js";import"./chunk-DZ63SHBZ.js";import"./chunk-N3ULCH4Z.js";import"./chunk-A6U5T4IK.js";import"./chunk-BYMGTA2M.js";import"./chunk-FFMQGMXV.js";import"./chunk-WVCYVA7Q.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-BQTEGPC7.js";import"./chunk-CKP3SGE2.js";import"./chunk-M7AYFT6S.js";import{$a as d,C as g,G as a,H as i,I as t,J as p,O as _,X as s,ab as I,bb as P,cb as S,db as f,fb as x,gb as R,hb as M,j as u,lb as T,ma as F,mb as N,pa as C,v as n,y as b,ya as E}from"./chunk-CP2QVCAP.js";import"./chunk-EVXCY5NW.js";import"./chunk-JXNEG2Q2.js";import"./chunk-FUY72XGA.js";import"./chunk-EQDBGDMV.js";import"./chunk-WESY2VG5.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{f as w}from"./chunk-D7YYRZS5.js";function U(o,y){o&1&&(i(0,"ion-text",11),s(1," El nombre es obligatorio (m\xEDnimo 3 caracteres). "),t())}function W(o,y){o&1&&(i(0,"ion-text",11),s(1," Ingresa un correo v\xE1lido. "),t())}function X(o,y){o&1&&(i(0,"ion-text",11),s(1," La contrase\xF1a debe tener al menos 6 caracteres. "),t())}function Y(o,y){o&1&&(i(0,"ion-text",11),s(1," Las contrase\xF1as no coinciden. "),t())}var me=(()=>{class o{constructor(){this.authService=u(Q),this.toastController=u(K),this.loadingController=u(J),this.router=u(E),this.showPassword=!1,this.registerForm=new S({name:new f("",[d.required,d.minLength(3)]),email:new f("",[d.required,d.email]),password:new f("",[d.required,d.minLength(6)]),confirmPassword:new f("",[d.required])},{validators:this.passwordsMatchValidator})}togglePasswordVisibility(){this.showPassword=!this.showPassword}passwordsMatchValidator(r){let l=r.get("password")?.value,e=r.get("confirmPassword")?.value;return l===e?null:{passwordMismatch:!0}}register(){return w(this,null,function*(){if(this.registerForm.invalid){this.showErrorMessage("Completa los campos correctamente.");return}let r=yield this.loadingController.create({message:"Registrando...",spinner:"crescent",duration:2e3});yield r.present();let{name:l,email:e,password:m}=this.registerForm.value;try{yield this.authService.register(l,e,m),this.showInfoMessage("Registro exitoso. Redirigiendo..."),setTimeout(()=>this.router.navigate(["/home"]),2e3)}catch(c){this.showErrorMessage("Error al registrar: "+c.message)}finally{r.dismiss()}})}showErrorMessage(r){return w(this,null,function*(){(yield this.toastController.create({message:r,duration:3e3,position:"bottom",color:"danger"})).present()})}showInfoMessage(r){return w(this,null,function*(){(yield this.toastController.create({message:r,duration:2e3,position:"bottom",color:"success"})).present()})}static{this.\u0275fac=function(l){return new(l||o)}}static{this.\u0275cmp=b({type:o,selectors:[["app-register"]],decls:32,vars:10,consts:[[1,"ion-padding"],[3,"ngSubmit","formGroup"],["position","floating"],["type","text","formControlName","name"],["color","danger",4,"ngIf"],["type","email","formControlName","email"],["formControlName","password",3,"type"],["fill","clear","size","small","slot","end",3,"click"],[3,"name"],["formControlName","confirmPassword",3,"type"],["id","button-register","expand","full","type","submit",3,"disabled"],["color","danger"]],template:function(l,e){if(l&1&&(i(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),s(3,"Registrarse"),t()()(),i(4,"ion-content",0)(5,"form",1),_("ngSubmit",function(){return e.register()}),i(6,"ion-item")(7,"ion-label",2),s(8,"Nombre"),t(),p(9,"ion-input",3),t(),g(10,U,2,0,"ion-text",4),i(11,"ion-item")(12,"ion-label",2),s(13,"Correo Electr\xF3nico"),t(),p(14,"ion-input",5),t(),g(15,W,2,0,"ion-text",4),i(16,"ion-item")(17,"ion-label",2),s(18,"Contrase\xF1a"),t(),p(19,"ion-input",6),i(20,"ion-button",7),_("click",function(){return e.togglePasswordVisibility()}),p(21,"ion-icon",8),t()(),g(22,X,2,0,"ion-text",4),i(23,"ion-item")(24,"ion-label",2),s(25,"Confirmar Contrase\xF1a"),t(),p(26,"ion-input",9),i(27,"ion-button",7),_("click",function(){return e.togglePasswordVisibility()}),p(28,"ion-icon",8),t()(),g(29,Y,2,0,"ion-text",4),i(30,"ion-button",10),s(31," Registrarse "),t()()()),l&2){let m,c,h,v;n(5),a("formGroup",e.registerForm),n(5),a("ngIf",((m=e.registerForm.get("name"))==null?null:m.invalid)&&((m=e.registerForm.get("name"))==null?null:m.touched)),n(5),a("ngIf",((c=e.registerForm.get("email"))==null?null:c.invalid)&&((c=e.registerForm.get("email"))==null?null:c.touched)),n(4),a("type",e.showPassword?"text":"password"),n(2),a("name",e.showPassword?"eye-off":"eye"),n(),a("ngIf",((h=e.registerForm.get("password"))==null?null:h.invalid)&&((h=e.registerForm.get("password"))==null?null:h.touched)),n(4),a("type",e.showPassword?"text":"password"),n(2),a("name",e.showPassword?"eye-off":"eye"),n(),a("ngIf",e.registerForm.hasError("passwordMismatch")&&((v=e.registerForm.get("confirmPassword"))==null?null:v.touched)),n(),a("disabled",e.registerForm.invalid)}},dependencies:[O,L,k,G,q,D,A,j,z,B,H,V,C,F,T,x,I,P,N,R,M],encapsulation:2})}}return o})();export{me as RegisterPage};
