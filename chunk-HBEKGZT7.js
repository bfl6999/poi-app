import{a as k}from"./chunk-4LASXX4D.js";import{B as A,C as j,G as z,H as B,I as H,d as L,e as N,m as P,p as G,r as D,s as R,t as V,z as q}from"./chunk-C4635AQ6.js";import"./chunk-RXWWUHP3.js";import"./chunk-QUJFQN2Y.js";import"./chunk-S3FFCQW7.js";import"./chunk-DOTHXVNP.js";import"./chunk-AWJPMP66.js";import"./chunk-DZ63SHBZ.js";import"./chunk-N3ULCH4Z.js";import"./chunk-A6U5T4IK.js";import"./chunk-BYMGTA2M.js";import"./chunk-FFMQGMXV.js";import"./chunk-WVCYVA7Q.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-BQTEGPC7.js";import"./chunk-CKP3SGE2.js";import"./chunk-M7AYFT6S.js";import{$a as u,C as g,G as d,H as r,I as t,J as f,O as v,X as l,ab as _,bb as b,cb as S,db as h,fb as y,gb as E,hb as x,j as s,lb as M,ma as F,mb as T,pa as w,v as m,y as I,ya as C}from"./chunk-CP2QVCAP.js";import"./chunk-EVXCY5NW.js";import"./chunk-JXNEG2Q2.js";import"./chunk-FUY72XGA.js";import"./chunk-EQDBGDMV.js";import"./chunk-WESY2VG5.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{f as p}from"./chunk-D7YYRZS5.js";function K(o,J){o&1&&(r(0,"ion-text",7),l(1," Ingresa un correo v\xE1lido. "),t())}function O(o,J){o&1&&(r(0,"ion-text",7),l(1," La contrase\xF1a debe tener al menos 6 caracteres. "),t())}var ne=(()=>{class o{constructor(){this.authService=s(k),this.toastController=s(B),this.loadingController=s(z),this.router=s(C),this.loginForm=new S({email:new h("",[u.required,u.email]),password:new h("",[u.required,u.minLength(6)])})}login(){return p(this,null,function*(){if(this.loginForm.invalid){this.showErrorMessage("Por favor, completa los campos correctamente.");return}let i=yield this.loadingController.create({message:"Iniciando sesi\xF3n...",spinner:"crescent",duration:2e3});yield i.present();let{email:n,password:e}=this.loginForm.value;try{yield this.authService.login(n,e),this.showInfoMessage("Inicio de sesi\xF3n realizado. Redirigiendo..."),setTimeout(()=>{this.router.navigate(["/home"])},2e3)}catch(a){this.showErrorMessage("Error en la autenticaci\xF3n: "+a.message)}finally{i.dismiss()}})}showErrorMessage(i){return p(this,null,function*(){(yield this.toastController.create({message:i,duration:3e3,position:"bottom",color:"danger"})).present()})}showInfoMessage(i){return p(this,null,function*(){(yield this.toastController.create({message:i,duration:2e3,position:"bottom",color:"success"})).present()})}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=I({type:o,selectors:[["app-login"]],decls:18,vars:4,consts:[[1,"ion-padding"],[3,"ngSubmit","formGroup"],["position","floating"],["type","email","formControlName","email"],["color","danger",4,"ngIf"],["type","password","formControlName","password"],["id","button-sign-in","expand","full","type","submit",3,"disabled"],["color","danger"]],template:function(n,e){if(n&1&&(r(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),l(3,"Iniciar Sesi\xF3n"),t()()(),r(4,"ion-content",0)(5,"form",1),v("ngSubmit",function(){return e.login()}),r(6,"ion-item")(7,"ion-label",2),l(8,"Correo Electr\xF3nico"),t(),f(9,"ion-input",3),t(),g(10,K,2,0,"ion-text",4),r(11,"ion-item")(12,"ion-label",2),l(13,"Contrase\xF1a"),t(),f(14,"ion-input",5),t(),g(15,O,2,0,"ion-text",4),r(16,"ion-button",6),l(17,"Iniciar sesi\xF3n"),t()()()),n&2){let a,c;m(5),d("formGroup",e.loginForm),m(5),d("ngIf",((a=e.loginForm.get("email"))==null?null:a.invalid)&&((a=e.loginForm.get("email"))==null?null:a.touched)),m(5),d("ngIf",((c=e.loginForm.get("password"))==null?null:c.invalid)&&((c=e.loginForm.get("password"))==null?null:c.touched)),m(),d("disabled",e.loginForm.invalid)}},dependencies:[H,N,P,G,D,R,V,q,A,j,L,w,F,M,y,_,b,T,E,x],encapsulation:2})}}return o})();export{ne as LoginPage};
